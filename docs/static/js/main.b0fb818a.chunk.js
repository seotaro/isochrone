(this.webpackJsonpisochrone=this.webpackJsonpisochrone||[]).push([[0],{65:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(48),r=n.n(o),i=(n(64),n(65),n(31)),s=n.n(i),l=n(46),u=n(9),b=n(109),j=n(116),d=n(115),f=n(117),g=n(110),p=n(113),h=n(118),O=n(112),m=n(111),x=n(32),v=n.n(x),y=n(2);v.a.accessToken="pk.eyJ1Ijoic2VvdGFybyIsImEiOiJjazA2ZjV2ODkzbmhnM2JwMGYycmc5OTVjIn0.5k-2FWYVmr5FH7E4Uk6V0g";var k=function(){var e=F(),t=Object(a.useRef)(null),n=Object(a.useRef)(null),c=Object(a.useState)({lng:139.75207,lat:35.68435}),o=Object(u.a)(c,2),r=o[0],i=o[1],b=Object(a.useState)(14),j=Object(u.a)(b,2),d=j[0],f=(j[1],Object(a.useState)("walking")),g=Object(u.a)(f,2),p=g[0],h=g[1],O=Object(a.useState)(30),m=Object(u.a)(O,2),x=m[0],k=m[1],I=Object(a.useState)(!1),S=Object(u.a)(I,2),D=S[0],E=S[1];return Object(a.useEffect)((function(){n.current||(n.current=new v.a.Map({container:t.current,style:"mapbox://styles/seotaro/ckvc0jbao15i214qq4vdrcwau",center:r,zoom:d,hash:!0}),n.current.on("load",(function(){E(!0),new v.a.Marker({color:"#225fc8",draggable:!0}).setLngLat(r).addTo(n.current).on("dragend",(function(e){i(e.target._lngLat)})).getElement().style.cursor="pointer",Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(p,x,r);case 2:t=e.sent,n.current.addSource("isochrone",{type:"geojson",data:t}),n.current.addLayer({id:"isoLayer",type:"fill",source:"isochrone",layout:{},paint:{"fill-color":"#225fc8","fill-opacity":.5}},"poi-label"),E(!1);case 6:case"end":return e.stop()}}),e)})))()})))})),Object(a.useEffect)((function(){if(n.current){var e=n.current.getSource("isochrone");e&&(E(!0),e.setData({type:"FeatureCollection",features:[]}),Object(l.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(p,x,r);case 2:n=t.sent,e.setData(n),E(!1);case 5:case"end":return t.stop()}}),t)})))())}}),[p,x,r]),Object(y.jsxs)("div",{children:[Object(y.jsx)(w,{isLoading:D}),Object(y.jsx)("div",{ref:t,className:e.mapContainer}),Object(y.jsx)(C,{profile:p,onChangeProfile:function(e){h(e.target.value)},onChangeDuration:function(e,t){k(t)}})]})},w=function(e){var t=F(),n=e.isLoading;return Object(y.jsx)(d.a,{className:t.loading,sx:{display:"flex"},children:n?Object(y.jsx)(j.a,{}):null})},C=function(e){var t=F(),n=e.profile,a=e.onChangeProfile,c=e.onChangeDuration;return Object(y.jsxs)("div",{className:t.sidebar,children:[Object(y.jsx)(f.a,{variant:"h4",component:"div",gutterBottom:!0,children:"Mapbox Ishochrone sample"}),Object(y.jsx)(O.a,{component:"fieldset",children:Object(y.jsxs)(p.a,{row:!0,"aria-label":"profile",defaultValue:"walking",name:"radio-buttons-group",value:n,onChange:a,children:[Object(y.jsx)(h.a,{value:"walking",control:Object(y.jsx)(g.a,{}),label:"walking"}),Object(y.jsx)(h.a,{value:"cycling",control:Object(y.jsx)(g.a,{}),label:"cycling"}),Object(y.jsx)(h.a,{value:"driving",control:Object(y.jsx)(g.a,{}),label:"driving"})]})}),Object(y.jsx)(m.a,{"aria-label":"duration",defaultValue:30,valueLabelFormat:function(e){return"".concat(e),e<60?"".concat(e," min"):"".concat(e/60," h")},valueLabelDisplay:"auto",min:1,max:60,onChangeCommitted:c})]})},L=function(e,t,n){return fetch("https://api.mapbox.com/isochrone/v1/mapbox/".concat(e,"/").concat(n.lng,",").concat(n.lat,"?contours_minutes=").concat(t,"&polygons=true&access_token=").concat(v.a.accessToken),{method:"GET"}).then((function(e){return e.json()}))},F=Object(b.a)((function(){return{mapContainer:{height:"100vh"},sidebar:{backgroundColor:"rgba(255, 255, 255, 0.5)",color:"#000",padding:12,zIndex:1,position:"absolute",top:0,left:0,margin:12,borderRadius:4},loading:{zIndex:10,position:"absolute",top:"50%",left:"50%"}}})),I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),o(e),r(e)}))};r.a.render(Object(y.jsx)(c.a.StrictMode,{children:Object(y.jsx)(k,{})}),document.getElementById("root")),I()}},[[72,1,2]]]);